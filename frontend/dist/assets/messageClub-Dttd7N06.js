import{i as j,r as i,u as S,j as C,n as v,c as e,F as D,k as I,l as T,a,m as B,v as M,p as N,q as L,o as s,y as x,x as c,t as V}from"./index-BQpoMu_H.js";import{_ as A,a as F}from"./send-BRNNo5Pw.js";const H={key:0,class:"flex gap-2 items-center justify-self-start"},O={class:"bg-gray-700 px-4 py-2 rounded-full"},q={key:1,class:"flex gap-2 items-center justify-self-end"},z={class:"bg-gray-700 px-4 py-2 rounded-full"},E={key:1,class:"w-full flex justify-center items-center text-2xl font-bold h-[50vh]"},J={key:2,class:"w-full animate-pulse grid gap-2 pt-16 p-4"},P={class:"w-full p-2 flex lg:bg-[#63636388] bg-[#474747] rounded-full items-center"},R={__name:"messageClub",setup(U){V();const n=i(null),r=i(null),u=i(null),g=S(),b=async(y=null,t=!1)=>{var o,l;const d=await g.fetchData({url:"/message/get",cache:y,refresh:t});((l=(o=n.value)==null?void 0:o.data)==null?void 0:l.length)===0&&v(()=>f()),n.value=d},f=()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)},p=i(null);C(async()=>{await b(),p.value=JSON.parse(localStorage.getItem("user")),v(()=>f())});const k=async()=>{r.value&&(await g.fetchData({url:"/message/send",method:"POST",data:{message:r.value}}),r.value="",await b(!1,!1),v(()=>f()))};return(y,t)=>{var d,o;return s(),e("div",null,[n.value?(s(),e("div",{key:0,ref_key:"chatContainer",ref:u,class:"mt-[6rem] overflow-y-auto lg:h-[calc(100vh-12rem)] h-[calc(100vh-16rem)]"},[(s(!0),e(D,null,I((d=n.value)!=null&&d.data?n.value.data:[],l=>{var m,h,_,w;return s(),e("div",{key:l._id,class:"p-4 grid items-center w-full"},[((m=l==null?void 0:l.userId)==null?void 0:m._id)!==((h=p.value)==null?void 0:h._id)?(s(),e("div",H,[t[1]||(t[1]=a("img",{src:x,alt:"",class:"w-8 h-8"},null,-1)),a("div",O,c((_=l==null?void 0:l.userId)==null?void 0:_.name)+" - "+c(l==null?void 0:l.message),1)])):(s(),e("div",q,[a("div",z,c((w=l==null?void 0:l.userId)==null?void 0:w.name)+" - "+c(l==null?void 0:l.message),1),t[2]||(t[2]=a("img",{src:x,alt:"",class:"w-8 h-8"},null,-1))]))])}),128))],512)):((o=r.value)==null?void 0:o.length)<1?(s(),e("div",E," No public contact yet ")):(s(),e("div",J,t[3]||(t[3]=[T('<div class="lg:h-12 h-8 w-[30%] bg-gray-200 rounded-full dark:bg-gray-700 lg:mb-2 justify-self-start" data-v-8eb1507b></div><div class="lg:h-12 h-8 w-[40%] bg-gray-200 rounded-full dark:bg-gray-700 lg:mb-2 justify-self-end" data-v-8eb1507b></div><div class="lg:h-12 h-8 w-1/2 bg-gray-200 rounded-full dark:bg-gray-700 lg:mb-2 justify-self-start" data-v-8eb1507b></div><div class="lg:h-12 h-8 w-[30%] bg-gray-200 rounded-full dark:bg-gray-700 lg:mb-2 justify-self-end" data-v-8eb1507b></div><div class="lg:h-12 h-8 w-[80%] bg-gray-200 rounded-full dark:bg-gray-700 lg:mb-2 justify-self-start" data-v-8eb1507b></div><span class="sr-only" data-v-8eb1507b>Loading...</span>',6)]))),a("form",{onSubmit:L(k,["prevent"]),class:"py-4 lg:px-32 px-2 justify-between -translate-y-16 lg:translate-y-0 fixed bottom-0 form-container"},[a("div",P,[B(a("input",{type:"text",class:"w-full border-none outline-none grow bg-transparent pl-4","onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),placeholder:"Message Here!"},null,512),[[M,r.value]]),t[5]||(t[5]=a("img",{src:A,alt:"",class:"w-6 h-6 mr-2"},null,-1)),a("button",{class:N(["p-2 rounded-full",[r.value?"bg-[#A052C6]":"bg-gray-900"]]),type:"submit"},t[4]||(t[4]=[a("img",{src:F,alt:"",class:"md:w-6 md:h-6"},null,-1)]),2)])],32)])}}},Q=j(R,[["__scopeId","data-v-8eb1507b"]]);export{Q as default};
